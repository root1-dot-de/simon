<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta content="text/html; charset=UTF-8" http-equiv="Content-Type" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />                                <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />                                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> <p><font size="4" color="#009900"><strong>SIMON</strong> </font><font size="4">- <font color="#009900"><strong>S</strong></font>imple <font color="#009900"><strong>I</strong></font>nvocation of <font color="#009900"><strong>M</strong></font>ethods <font color="#009900"><strong>O</strong></font>ver <font color="#009900"><strong>N</strong></font>etwork</font></p> <p><font color="#009900">SIMON </font>is a kind of router-friendly RMI replacement. It uses only one TCP connection from the client to the server to do all the communication, even with callbacks from the server to the client. </p> <p>As RMI isn't able to do that, <font color="#009900">SIMON </font>is THE solution for people who want to run their applications WITH callbacks over the internet.</p><p>&nbsp;</p><p><font size="4"><strong>Codesamle</strong></font>&nbsp;</p><p>&nbsp;</p><p>Here's a small example that shows how to use <font color="#009900">SIMON</font> ...</p><p>First of all, we need some interfaces which should be available on the respective remote-installation:&nbsp;</p><p><em>ServerInterface.java&nbsp;</em></p><table border="0" style="background-color: #ccccff"><tbody><tr><td><strong style="color: #0000ff; font-style: normal; font-weight: normal">package</strong> de.root1.simon.codesample.common; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.SimonRemote; <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.SimonRemoteException; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">interface</strong> ServerInterface <strong style="color: #0000ff; font-style: normal; font-weight: normal">extends</strong> SimonRemote { <br /> &nbsp; &nbsp; <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">void</strong> login(ClientCallbackInterface clientCallback) <strong style="color: #0000ff; font-style: normal; font-weight: normal">throws</strong> SimonRemoteException; <br />  <br /> } <br /></td></tr></tbody></table><p>&nbsp;</p><p><em>ClientCallbackInterface.java&nbsp;</em></p> <table border="0" style="background-color: #ccccff"> <tbody><tr><td valign="top" align="left" class="code"><strong style="color: #0000ff; font-style: normal; font-weight: normal">package</strong> de.root1.simon.codesample.common; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.SimonRemote; <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.SimonRemoteException; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">interface</strong> ClientCallbackInterface <strong style="color: #0000ff; font-style: normal; font-weight: normal">extends</strong> SimonRemote { <br /> &nbsp; &nbsp; <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">void</strong> callback(String text) <strong style="color: #0000ff; font-style: normal; font-weight: normal">throws</strong> SimonRemoteException; <br />  <br /> }</td><td> </td></tr></tbody> </table> <p>&nbsp;</p><p>&nbsp;Then we need the implementation for the server remote methods ...</p><p><em>ServerInterfaceImpl.java&nbsp;</em></p> <table border="0" style="background-color: #ccccff"> <tbody><tr><td valign="top" align="left" class="code"><strong style="color: #0000ff; font-style: normal; font-weight: normal">package</strong> de.root1.simon.codesample.server; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.SimonRemoteException; <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.codesample.common.ClientCallbackInterface; <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.codesample.common.ServerInterface; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">class</strong> ServerInterfaceImpl <strong style="color: #0000ff; font-style: normal; font-weight: normal">implements</strong> ServerInterface { <br />  <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">private</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">static</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">final</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">long</strong> serialVersionUID = 1L; <br />  <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">void</strong> login(ClientCallbackInterface clientCallback) <strong style="color: #0000ff; font-style: normal; font-weight: normal">throws</strong> SimonRemoteException { <br /> &nbsp; &nbsp;&nbsp; &nbsp;clientCallback.callback(&quot;Dies ist der Callback. &quot; + <br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&quot;Deine Adresse lautet &quot;+Simon.getRemoteInetAddress(clientCallback)+&quot; &quot;+ <br /> &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&quot;und du bist verbunden auf dem lokalen Port &quot;+Simon.getRemotePort(clientCallback)); <br /> &nbsp; &nbsp;} <br />  <br /> }</td> <td> </td></tr></tbody> </table> <p>&nbsp;</p><p>And of course the callback methods that are available on the client side have the be implemented ...&nbsp;</p><p><em>ClientCallbackImpl.java&nbsp;</em></p><table border="0" style="background-color: #ccccff"><tbody><tr><td valign="top" align="left" class="code"><strong style="color: #0000ff; font-style: normal; font-weight: normal">package</strong> de.root1.simon.codesample.client; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.SimonRemoteException; <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.codesample.common.ClientCallbackInterface; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">class</strong> ClientCallbackImpl <strong style="color: #0000ff; font-style: normal; font-weight: normal">implements</strong> ClientCallbackInterface { <br />  <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">private</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">static</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">final</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">long</strong> serialVersionUID = 1L; <br />  <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">void</strong> callback(String text) <strong style="color: #0000ff; font-style: normal; font-weight: normal">throws</strong> SimonRemoteException { <br /> &nbsp; &nbsp;&nbsp; &nbsp;System.out.println(&quot;Die folgende Meldung stammt vom Server: &quot;+text); <br /> &nbsp; &nbsp;} <br />  <br /> }</td> <td> </td></tr></tbody> </table>   <p>&nbsp;Now it's time to write the &quot;server&quot;:</p><p><em>Server.java&nbsp;</em></p> <table border="0" style="background-color: #ccccff"> <tbody><tr><td valign="top" align="left" class="code"><strong style="color: #0000ff; font-style: normal; font-weight: normal">package</strong> de.root1.simon.codesample.server; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.Simon; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">class</strong> Server { <br /> &nbsp; &nbsp; <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">static</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">void</strong> main(String[] args) { <br /> &nbsp; &nbsp;&nbsp; &nbsp;ServerInterfaceImpl serverImpl = <strong style="color: #0000ff; font-style: normal; font-weight: normal">new</strong> ServerInterfaceImpl(); <br /> &nbsp; &nbsp;&nbsp; &nbsp;Simon.createRegistry(2000); <br /> &nbsp; &nbsp;&nbsp; &nbsp;Simon.bind(&quot;server&quot;, serverImpl); <br /> &nbsp; &nbsp;&nbsp; &nbsp;System.out.println(&quot;Server gestartet&quot;); <br /> &nbsp; &nbsp;} <br />  <br /> }</td> <td> </td></tr></tbody> </table>   <p>&nbsp;... and the &quot;client&quot;:</p><p><em>Client.java&nbsp;</em></p>  <table border="0" style="background-color: #ccccff">  <tbody><tr><td valign="top" align="left" class="code"><strong style="color: #0000ff; font-style: normal; font-weight: normal">package</strong> de.root1.simon.codesample.client; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.Simon; <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.SimonRemoteException; <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">import</strong> de.root1.simon.codesample.common.ServerInterface; <br />  <br /> <strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">class</strong> Client { <br /> &nbsp; &nbsp; <br /> &nbsp; &nbsp;<strong style="color: #0000ff; font-style: normal; font-weight: normal">public</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">static</strong> <strong style="color: #0000ff; font-style: normal; font-weight: normal">void</strong> main(String[] args) <strong style="color: #0000ff; font-style: normal; font-weight: normal">throws</strong> SimonRemoteException, ConnectException { <br /> &nbsp; &nbsp;&nbsp; &nbsp; <br /> &nbsp; &nbsp;&nbsp; &nbsp;<span style="color: #689868">// Callbackobjekt anlegen</span> <br /> &nbsp; &nbsp;&nbsp; &nbsp;ClientCallbackImpl clientCallbackImpl = <strong style="color: #0000ff; font-style: normal; font-weight: normal">new</strong> ClientCallbackImpl(); <br /> &nbsp; &nbsp;&nbsp; &nbsp;System.out.println(&quot;Callback Objekt angelegt&quot;); <br /> &nbsp; &nbsp;&nbsp; &nbsp; <br /> &nbsp; &nbsp;&nbsp; &nbsp;ServerInterface server = (ServerInterface) Simon.lookup(&quot;127.0.0.1&quot;, 2000, &quot;server&quot;); <br /> &nbsp; &nbsp;&nbsp; &nbsp; <br /> &nbsp; &nbsp;&nbsp; &nbsp;server.login(clientCallbackImpl); <br /> &nbsp; &nbsp;&nbsp; &nbsp; <br /> &nbsp; &nbsp;} <br />  <br /> }</td> <td> </td></tr></tbody> </table>    <p>&nbsp;</p> <p>&nbsp;That's all folks ... Quite easy, isn't it?</p> <p>&nbsp;</p><p><strong><font size="4">License</font></strong></p><p><font color="#009900">SIMON </font>is licensed under the GPL (see above). If you're not able to use GPL, please don't hesitate to contact me. I do not ask for millions ... ;-) But <font color="#009900">SIMON </font>isn't free for non-gpl-compatible projects.<br /></p> <p>&nbsp;</p> <p><font size="4"><strong>Changelog</strong></font></p> <p>end of 2007: first implementation idea<br />18.01.2008: first public release<br /> 07.02.2008: set project to utf8 encoding and removed german &quot;umlaute&quot;<br /> 08.02.2008: set compiler to java 5<br /> 11.02.2008: server only needs the remote interface. he doesn't need the interface implementation anymore.<br /> 12.02.2008: more clean implementaion of the workaround of 11.02.2008<br /> 14.02.2008: SIMON can now be asked for the IP and port of a remote object<br /> 14.02.2008: changed project structure, created windows batch files for code sample<br /> 15.02.2008: fix: serversided callbacks to the client do not throw exceptions anymore<br /> 03.03.2008: fix: printstacktraces due to connection errors are now trhowing &quot;ConnectException&quot;s. new: thread-pools for more performance<br /> 03.03.2008: performance-fix: improved speed compared to RMI with &lt;16kbyte size of method arguments<br /> 04.03.2008: performance-fix: making use of &quot;Object*Streams&quot; chacing technology. Have alook at the static method Simon#setObjectCacheLifetime(int value). SIMON is hereby, dependend on the use-case, faster than RMI.<br /> 05.03.2008: fix: Client wartet nicht mehr bis in alle unendlichkeit auf seinen void-return-Wert<br /> 06.03.2008: fix: MacOS X don't like Socket#setTrafficClass() method.and throws an exception. MacOS X is now ignoring this call. According to the related RFC from 1998, this tcp-option is obsolete.<br /> 07.03.2008: fix: You're now able to use toString() on remote objects. also hashCode() and equals() are now possible.<br />  08.03.2008: more debug-output<br /> </p>